aux_source_directory(. SRC_LIST)
    if(CMAKE_COMPILER_IS_GNUCXX)
        set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake")
        message(STATUS "Cmake module path is: ${CMAKE_MODULE_PATH}")
        include(CodeCoverage)
        if(CODE_COVERAGE_FOUND)
            message(STATUS "Code coverage report tools was found so coverage report is available with target 'coverage'")
            setup_target_for_coverage(coverage tests coverage)
        else()
            message(WARNING "Coverage report tools was not found so we can't generate code coverage report")
        endif()
    else()
        message(WARNING "Compiler intendification is not GNU so we cant produce coverage report")
    endif()
if(UNIX)
  file(GLOB SRC_LIST ${SRC_LIST} "unix/*.c")
  include_directories(. unix)
endif(UNIX)

if(WIN32)
  include_directories(. win32)
  file(GLOB SRC_LIST ${SRC_LIST} "*win32/*.c")
file(GLOB SRC_LIST ${SRC_LIST} "*win32/gnutimeutils/*.c")
endif(WIN32)

add_library(${PROJECT_NAME} ${SRC_LIST} )
add_dependencies(${PROJECT_NAME} timezones-map)

if(UNIX)
  target_link_libraries(${PROJECT_NAME} rt m)
endif(UNIX)

include(../cmake/TZPack.cmake)
